


--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Ge_sg227.ncmat;dcutoff=0.5;mos=40arcsec;dir1=@crys_hkl:5,1,1@lab:0,0,1;dir2=@crys_hkl:0,-1,1@lab:0,1,0'}
FAILED (as expected): Oriented materials cannot be represented in the ENDF format and are not supported
EndfMetaData({"ALAB": "MyLAB", "AUTH": "NCrystal", "LIBNAME": "MyLib", "NLIB": 0, "REFERENCE": "REFERENCE", "LREL": 0, "NVER": 1, "MATNUM": {"Ge": 99}, "ENDATE": "", "EDATE": "MMMYY", "DDATE": "MMMYY", "RDATE": "MMMYY"})



--------------------------------------------------------------------------------
{'endf_metadata': EndfMetaData({"ALAB": "MyLAB", "AUTH": "NCrystal", "LIBNAME": "MyLib", "NLIB": 0, "REFERENCE": "REFERENCE", "LREL": 0, "NVER": 1, "MATNUM": {"Ge": 99}, "ENDATE": "", "EDATE": "MMMYY", "DDATE": "MMMYY", "RDATE": "MMMYY"}),
 'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1'}
CAUGHT ESCAPED WARNING (NCrystalUserWarning): Temperature not explicitly given in the cfg-string,  using T = 293.15
Initialise nuclear data...
FAILED (as expected): Incorrect material number assignment



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1',
 'temperatures': [-100]}
CAUGHT ESCAPED WARNING (NCrystalUserWarning): Temperature not explicitly given in the cfg-string,  using T = 293.15
CAUGHT ESCAPED WARNING (NCrystalUserWarning): Multiple temperatures requested. Although this is supported, it is not recommended because NCrystal generates a custom (alpha,beta) grid for each temperature. The (alpha,beta) grid for first temperature will be used, and S(alpha, beta) for other temperatures will be interpolated.
FAILED (as expected): Non positive temperatures



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1',
 'temperatures': [293.15]}
FAILED (as expected): Repeated temperatures: temperatures parameter must not include the temperature defined in the cfg string



--------------------------------------------------------------------------------
{'force_save': True, 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1;comp=coh_elas'}
FAILED (as expected): MF7/MT4 is mandatory in an ENDF file but no inelastic data found



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1',
 'verbosity': 'WRONGVALUE'}
FAILED (as expected): Invalid value of verbosity parameter (expects value 0, 1, 2, or 3): WRONGVALUE



--------------------------------------------------------------------------------
{'elastic_mode': 'something wrong',
 'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1'}
FAILED (as expected): Elastic mode something wrong not in (('greater', 'scaled', 'mixed'))



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'MgD2_sg136_MagnesiumDeuteride.ncmat;vdoslux=1'}
Initialise nuclear data...
FAILED (as expected): Conversion to ENDF is currently supported only for natural elements



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1',
 'temperatures': 'WRONGVALUE'}
FAILED (as expected): temperatures parameter: should be a list or tuple of float or int



--------------------------------------------------------------------------------
{'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1',
 'temperatures': ['WRONGVALUE']}
FAILED (as expected): Something wrong with the temperatures parameter: (['WRONGVALUE'])
============= CLI >>Al_with_SANS.ncmat<< ====================
NCrystal WARNING: Loading NCMAT data which has @CUSTOM_ section(s). This is OK if intended.
FAILED (as expected): SANS cannot be represented in the ENDF format and is not supported



--------------------------------------------------------------------------------
{'force_save': True, 'ncmat_cfg': 'freegas::Ar/2.5e-5perAa3;vdoslux=1'}
CAUGHT ESCAPED WARNING (NCrystalUserWarning): Temperature not explicitly given in the cfg-string,  using T = 293.15
FAILED (as expected): Conversion to ENDF supported only for VDOS and VDOSDebye dyninfos



--------------------------------------------------------------------------------
{'force_save': True,
 'include_gif': False,
 'isotopic_expansion': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1'}
FAILED (as expected): Isotopic expansion requires generalized information file, use --gif



--------------------------------------------------------------------------------
{'force_save': True,
 'include_gif': True,
 'isotopic_expansion': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1'}
FAILED (as expected): Isotopic expansion in conversion to ENDF is not yet supported



--------------------------------------------------------------------------------
{'endf_metadata': {'WRONGPARAM': 0},
 'force_save': True,
 'ncmat_cfg': 'Al_sg225.ncmat;vdoslux=1'}
FAILED (as expected): Invalid EndfMetaData parameter "WRONGPARAM"
FAILED (as expected): Trying to read invalid EndfMetaData parameter "WRONGPARAM"
============= CLI >>'"stdlib::Al_sg225.ncmat"' -v -q<< ====================
FAILED (as expected): Inconsistent usage of --quiet and --verbose flags
============= CLI >>'"stdlib::Al_sg225.ncmat"' --mdata WRONGINPUT<< ====================
FAILED (as expected): Argument to --mdata must be a JSON dictionary of key, value pairs
============= CLI >>'phases<0.1*Al_sg225.ncmat&0.9*Si_sg227.ncmat>'<< ====================
FAILED (as expected): Only single phase materials supported
============= CLI >>'stdlib::Al_sg225.ncmat;temp=350K;vdoslux=1' -vvv -m Al -f -e greater '--mdata={"ALAB": "MyLab"}'<< ====================
Initialise nuclear data...
>>> alpha points: 100, alpha range: (5.958e-50, 692.2)
>>> beta points: 123, beta range: (0, 66.15)
>>> Interpolating T=350.0K for Al
>> Prepare elastic approximations
>> Principal elastic mode for Al: coherent
> Generate MF7
Write ENDF file tsl_Al.endf...
Files created:
  tsl_Al.endf with fraction 1.0
============================================================================================================================================
============= CLI >>-h<< ====================
usage: ncrystal_ncmat2endf CFGSTR [--elas MODE] [--mat NAME] [--mdata DATA]
                           [<<additional options described below>>]

Example invocations:

    $> ncrystal_ncmat2endf 'Al_sg225.ncmat;temp=350K'

    $> ncrystal_ncmat2endf 'Si_sg227.ncmat;temp=293.6K' -m Si \
                           --mdata '{"MATNUM": {"Si": 99}}' --now

    $> ncrystal_ncmat2endf 'ZnO_sg186_ZincOxide.ncmat;temp=293.15K' -m ZnO \
                           --mdata '{"MATNUM": {"Zn": 101, "O": 102}}' -e scaled

    $> ncrystal_ncmat2endf 'Bi_sg166.ncmat;comp=inelas;temp=77K' -m Bi \
                           --mdata '{"MATNUM": {"Bi": 200}}' --force

options:
  -h, --help            show this help message and exit
  -v, --verbose         Increase verbosity. Specify twice for additional verbosity.
  --quiet, -q           Silence non-error output (automatic if --output=stdout).

required arguments:
  CFGSTR                NCrystal cfg-string defining the material.

Commonly used arguments:
  -m, --mat NAME        Name of the material to be processed. ENDF files will be
                        named tsl_element_in_name.endf for compounds or
                        tsl_element.endf for elements. E.g. tsl_H_in_CH2.endf or
                        tsl_Cu.endf
  -e, --elas MODE       Approximation used for the elastic component (default
                        "scaled, other options are "greater" and "mixed"). See
                        DOI:10.1016/j.nima.2021.166227 for meaning of modes.
  --mdata MDATA         JSON dictionary containing ENDF-6 metadata. Run with
                        --mdata=help for more information.
  --now                 Set ENDF6 fields EDATE, DDATE and RDATE to current date.
  -f, --force           Overwrite output files if they already exist (danger!)

Advanced expert-only arguments:
  -t, --temperatures TVALS [TVALS ...]
                        Additional temperatures to process. As noted above this is
                        not normally recommended, and it is preferred to invoke the
                        script for each temperature independently using the  "temp"
                        keyword in the cfg-string.
  --smin VALUE          Set the minimum value of S(alpha, beta) stored in MF7/MT4
  --emax EMAX           Maximum neutron energy covered by the scattering kernel
  --asymsab             Store S(a,b) in asymmetric form.
  --totsab              Store S(a,b) branches for positive and negative beta

=============================================
============= CLI >>--mdata=help<< ====================
Meta-data for ENDF can be provided by the --mdata option, by specifying a JSON
dictionary like:

  --mdata='{ "LIBNAME" : "MySuperLib", "ALAB" : "MySuperLab" }'

The list of supported meta-data keys and their meaning is:

        ALAB : Mnemonic for the originating laboratory.
        AUTH : Author(s) name(s).
     LIBNAME : Name of the nuclear data library.
        NLIB : Nuclear data library identifier (e.g. NLIB=0 for ENDF/B).
   REFERENCE : Primary reference for the evaluation.
        LREL : Nuclear data library release number.
        NVER : Nuclear data library version number.
      MATNUM : Fixme add doc string.
      ENDATE : Master File entry date in the form YYYYMMDD (only used for ENDF-B
               releases).
       EDATE : Evaluation date in the form MMMYY. The special string "NOW" can
               be used to select the current date.
       DDATE : Distribution date in the form MMMYY. The special string "NOW" can
               be used to select the current date.
       RDATE : Revision date in the form MMMYY. The special string "NOW" can be
               used to select the current date.

=======================================================
============= CLI >>--mdata help<< ====================
Meta-data for ENDF can be provided by the --mdata option, by specifying a JSON
dictionary like:

  --mdata='{ "LIBNAME" : "MySuperLib", "ALAB" : "MySuperLab" }'

The list of supported meta-data keys and their meaning is:

        ALAB : Mnemonic for the originating laboratory.
        AUTH : Author(s) name(s).
     LIBNAME : Name of the nuclear data library.
        NLIB : Nuclear data library identifier (e.g. NLIB=0 for ENDF/B).
   REFERENCE : Primary reference for the evaluation.
        LREL : Nuclear data library release number.
        NVER : Nuclear data library version number.
      MATNUM : Fixme add doc string.
      ENDATE : Master File entry date in the form YYYYMMDD (only used for ENDF-B
               releases).
       EDATE : Evaluation date in the form MMMYY. The special string "NOW" can
               be used to select the current date.
       DDATE : Distribution date in the form MMMYY. The special string "NOW" can
               be used to select the current date.
       RDATE : Revision date in the form MMMYY. The special string "NOW" can be
               used to select the current date.

=======================================================
============= CLI >>'stdlib::Al_sg225.ncmat;vdoslux=1' -vvv -m Al -f -e scaled --totsab --asymsab<< ====================
CAUGHT ESCAPED WARNING (NCrystalUserWarning): Creating non standard S(a,b) with LASYM = 3
Initialise nuclear data...
>>> alpha points: 100, alpha range: (8.364e-50, 821.4)
>>> beta points: 129, beta range: (0, 76.84)
>>> Interpolating T=293.15K for Al
>> Prepare elastic approximations
>> Scaled elastic mode for single atom Al: coherent
> Generate MF7
Write ENDF file tsl_Al.endf...
Files created:
  tsl_Al.endf with fraction 1.0
========================================================================================================================
============= CLI >>'stdlib::Al_sg225.ncmat;vdoslux=1' -m Al -f --now<< ====================
Initialise nuclear data...
Write ENDF file tsl_Al.endf...
Files created:
  tsl_Al.endf with fraction 1.0
============================================================================================
